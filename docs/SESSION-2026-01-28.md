# Session de Développement - 28 Janvier 2026

## Résumé Exécutif

Session focalisée sur l'amélioration de l'UX des formulaires d'ajout (Experience et Formation) avec un thème dark moderne et des calendriers interactifs.

---

## 1. Modifications Effectuées

### 1.1 Dark Theme pour AddExperience et AddFormation

**Objectif:** Appliquer le même thème dark (avec orbes lumineux) que la page "Modifier le profil" aux pages d'ajout.

**Fichiers modifiés:**
- `src/pages/AddExperience.tsx`
- `src/pages/AddFormation.tsx`

**Éléments du design:**

| Élément | Valeur |
|---------|--------|
| Background | `#0a1628` (dark blue) |
| Orbe 1 | `bg-blue-500/20` - top-left, blur-3xl, animate-pulse-glow |
| Orbe 2 | `bg-cyan-500/15` - middle-right, blur-3xl, animate-float-slow |
| Orbe 3 | `bg-violet-500/10` - bottom-left, blur-3xl, animate-pulse-glow (delay 2s) |
| Card Form | `backdrop-blur-xl bg-white/10 border-white/10` (glassmorphism) |
| Header | `bg-gradient-to-r from-primary to-primary-light` |
| Bouton Submit | `bg-gradient-to-r from-cyan-500 to-blue-600` |

**Code clé pour les orbes:**
```tsx
<div className="absolute inset-0 overflow-hidden pointer-events-none">
  <div className="absolute -top-20 -left-20 w-64 h-64 bg-blue-500/20 rounded-full blur-3xl animate-pulse-glow" />
  <div className="absolute top-1/3 -right-32 w-80 h-80 bg-cyan-500/15 rounded-full blur-3xl animate-float-slow" />
  <div className="absolute -bottom-20 left-1/4 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-pulse-glow" style={{ animationDelay: '2s' }} />
</div>
```

---

### 1.2 Calendrier Moderne (CalendarModal)

**Objectif:** Remplacer les inputs date HTML basiques par un calendrier interactif moderne.

**Fichiers modifiés:**
- `src/components/profile/forms/ExperienceForm.tsx`
- `src/components/profile/forms/FormationForm.tsx`
- `src/components/profile/forms/PersonalInfoForm.tsx`

**Fonctionnalités du CalendarModal:**

1. **Header avec gradient** - Affiche la date sélectionnée en français
2. **Sélecteur d'année** - Dropdown + flèches de navigation
3. **Navigation par mois** - Flèches gauche/droite
4. **Composant Calendar** - De Shadcn/UI
5. **Boutons d'action** - "Confirmer" (vert) et "Effacer" (gris)
6. **Animation** - `slide-in-from-bottom` sur mobile

**Structure du CalendarModal:**
```tsx
const CalendarModal = ({
  isOpen,
  onClose,
  title,
  tempDate,
  setTempDate,
  onConfirm,
  onClear,
  currentMonth,
  setCurrentMonth,
  currentYear,
  setCurrentYear
}) => {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-[100] bg-black/40 flex items-end sm:items-center justify-center">
      <div className="bg-white rounded-t-3xl sm:rounded-2xl shadow-2xl overflow-hidden w-full sm:max-w-sm animate-in slide-in-from-bottom duration-300">
        {/* Header gradient */}
        <div className="bg-gradient-to-r from-primary to-primary-light p-4">
          <h3 className="text-white font-semibold text-lg">{title}</h3>
          <p className="text-white/80 text-sm">
            {tempDate ? format(tempDate, "EEEE dd MMMM yyyy", { locale: fr }) : "Aucune date sélectionnée"}
          </p>
        </div>

        {/* Year selector */}
        <div className="p-4 border-b flex items-center justify-between">
          <Button variant="ghost" size="icon" onClick={() => setCurrentYear(y => y - 1)}>
            <ChevronLeft className="h-5 w-5" />
          </Button>
          <Select value={currentYear.toString()} onValueChange={(v) => setCurrentYear(parseInt(v))}>
            {/* Years from 1950 to current+5 */}
          </Select>
          <Button variant="ghost" size="icon" onClick={() => setCurrentYear(y => y + 1)}>
            <ChevronRight className="h-5 w-5" />
          </Button>
        </div>

        {/* Calendar component */}
        <div className="p-4">
          <Calendar
            mode="single"
            selected={tempDate}
            onSelect={setTempDate}
            month={currentMonth}
            onMonthChange={setCurrentMonth}
            locale={fr}
          />
        </div>

        {/* Action buttons */}
        <div className="p-4 border-t flex gap-3">
          <Button variant="outline" onClick={onClear} className="flex-1">
            <X className="h-4 w-4 mr-2" /> Effacer
          </Button>
          <Button onClick={onConfirm} className="flex-1 bg-green-500 hover:bg-green-600 text-white">
            <Check className="h-4 w-4 mr-2" /> Confirmer
          </Button>
        </div>
      </div>
    </div>
  );
};
```

---

### 1.3 Dark Mode Support pour les Formulaires

**Fichiers modifiés:**
- `src/components/profile/forms/PersonalInfoForm.tsx`
- `src/components/profile/forms/AddressForm.tsx`
- `src/components/shared/SimpleFileUpload.tsx`

**Pattern de classes conditionnelles:**
```tsx
const inputClasses = darkMode
  ? "bg-white/10 border-white/20 rounded-xl h-12 text-base text-white placeholder:text-white/40 focus:ring-2 focus:ring-cyan-400/30 focus:border-cyan-400/50 transition-all"
  : "bg-white border-gray-200 rounded-xl h-12 text-base focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all";

const labelClasses = darkMode
  ? "text-sm text-white/70"
  : "text-sm text-gray-600";

const selectTriggerClasses = darkMode
  ? "bg-white/10 border-white/20 rounded-xl h-12 text-base text-white focus:ring-2 focus:ring-cyan-400/30 [&>span]:text-white/40 [&[data-state=open]>span]:text-white"
  : "bg-white border-gray-200 rounded-xl h-12 text-base focus:ring-2 focus:ring-primary/20 transition-all";
```

**Icônes en dark mode:**
```tsx
<CalendarIcon className={`h-5 w-5 ${darkMode ? 'text-white/40' : 'text-gray-400'}`} />
```

---

## 2. Frameworks et Bibliothèques Utilisés

### 2.1 UI Components

| Package | Version | Usage |
|---------|---------|-------|
| `@radix-ui/react-select` | ^2.x | SelectTrigger, SelectContent, SelectItem |
| `@radix-ui/react-calendar` | via shadcn | Composant Calendar |
| `shadcn/ui` | latest | Button, Input, Form, Sheet, etc. |
| `tailwindcss` | ^3.4 | Styling avec classes utilitaires |

### 2.2 Date Handling

| Package | Usage |
|---------|-------|
| `date-fns` | Formatage des dates |
| `date-fns/locale/fr` | Locale française pour les dates |

**Exemple de formatage:**
```tsx
import { format } from "date-fns";
import { fr } from "date-fns/locale";

// Affichage: "mardi 28 janvier 2026"
format(date, "EEEE dd MMMM yyyy", { locale: fr })

// Affichage: "28 janvier 2026"
format(date, "dd MMMM yyyy", { locale: fr })
```

### 2.3 Form Management

| Package | Usage |
|---------|-------|
| `react-hook-form` | Gestion des formulaires |
| `@hookform/resolvers` | Validation avec Zod |
| `zod` | Schémas de validation |

### 2.4 Icons

| Package | Icons utilisées |
|---------|-----------------|
| `lucide-react` | CalendarIcon, ChevronLeft, ChevronRight, Check, X, User, Phone, FileText, MapPin, Upload, Loader2, AlertCircle |

---

## 3. Animations CSS Personnalisées

**Fichier:** `src/index.css`

```css
/* Orbes lumineux animés */
@keyframes pulse-glow {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}

@keyframes float-slow {
  0%, 100% { transform: translateY(0) translateX(0); }
  50% { transform: translateY(-20px) translateX(10px); }
}

.animate-pulse-glow {
  animation: pulse-glow 4s ease-in-out infinite;
}

.animate-float-slow {
  animation: float-slow 6s ease-in-out infinite;
}
```

---

## 4. Structure des Composants

```
src/
├── pages/
│   ├── AddExperience.tsx      # Page ajout expérience (dark theme)
│   ├── AddFormation.tsx       # Page ajout formation (dark theme)
│   └── Profile.tsx            # Page profil sauveteur
│
├── components/
│   ├── profile/
│   │   └── forms/
│   │       ├── ExperienceForm.tsx    # Formulaire avec CalendarModal
│   │       ├── FormationForm.tsx     # Formulaire avec CalendarModal
│   │       ├── PersonalInfoForm.tsx  # Infos perso avec CalendarModal
│   │       └── AddressForm.tsx       # Adresse avec darkMode
│   │
│   └── shared/
│       └── SimpleFileUpload.tsx      # Upload fichier avec darkMode
```

---

## 5. Props Pattern pour Dark Mode

Tous les composants de formulaire acceptent une prop `darkMode`:

```tsx
interface FormComponentProps {
  form: UseFormReturn<z.infer<typeof formSchema>>;
  darkMode?: boolean;  // Default: false
}

// Usage
<ExperienceForm form={form} darkMode={true} />
<FormationForm form={form} darkMode={true} />
<SimpleFileUpload form={form} darkMode={true} />
```

---

## 6. Points d'Attention pour les Prochaines Sessions

### 6.1 Couleurs Dark Mode

| Élément | Light Mode | Dark Mode |
|---------|------------|-----------|
| Background | `bg-white` | `bg-white/10` |
| Border | `border-gray-200` | `border-white/20` |
| Text | `text-gray-900` | `text-white` |
| Placeholder | `text-gray-400` | `text-white/40` |
| Label | `text-gray-600` | `text-white/70` |
| Focus ring | `ring-primary/20` | `ring-cyan-400/30` |

### 6.2 Z-Index Hierarchy

| Composant | Z-Index |
|-----------|---------|
| CalendarModal overlay | `z-[100]` |
| Sheet header | `z-20` |
| Panel principal | `z-10` |
| Orbes (pointer-events-none) | Default |

### 6.3 Mobile Considerations

- Calendrier slide-in depuis le bas (`items-end` sur mobile)
- Safe area pour iPhone (`h-20 md:h-0`)
- Touch targets minimum 44px (`h-12` pour inputs)

---

## 7. Déploiement

**URL de production:** https://pro-bain-native-test.vercel.app

**Commandes:**
```bash
npm run dev      # Développement local (port 8080)
npm run build    # Build production
npm run lint     # Vérification ESLint
```

---

## 8. Prochaines Améliorations Suggérées

1. **Virtual scrolling** pour les listes longues (Flux, Jobs)
2. **Haptic feedback** sur les boutons (via native.ts)
3. **Reduced motion** support pour accessibilité
4. **Harmonisation des 3 profils** (Rescuer, Trainer, Establishment)

---

*Document généré le 28 janvier 2026*
